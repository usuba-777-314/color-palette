/*!
 * color-palette v0.0.0 - Simple color picker. A user can choose to take a color from palette.
 * Copyright 2015 hironobu-igawa
 * license MIT
 */
var ColorPalette;!function(t){"use strict";t.Element=function(){function t(n){if(!(this instanceof t)){var o=new e;return e.apply(o,arguments),o}if(null==n)return void(this.elements=[]);if(n instanceof HTMLElement||n instanceof HTMLDocument)return void(this.elements=[n]);if(n instanceof t)return void(this.elements=Array.prototype.slice.apply(n.elements));if(n[0]instanceof HTMLElement||n[0]instanceof HTMLDocument)return void(this.elements=Array.prototype.slice.apply(n));if("string"==typeof n||n instanceof String){if("<"===n[0]&&">"===n[n.length-1]){var r=document.createElement("div");return r.innerHTML=n,void(this.elements=Array.prototype.slice.apply(r.children))}return void(this.elements=Array.prototype.slice.apply(document.querySelectorAll(n)))}this.elements=[]}return t.prototype.get=function(t){return this.elements[t]},t.prototype.on=function(t,e){return this.each(function(){this.addEventListener(t,e)})},t.prototype.off=function(t,e){return this.each(function(){this.removeEventListener(t,e)})},t.prototype.append=function(t){return this.each(function(){var n=this;e(t).each(function(){n.appendChild(this)})})},t.prototype.appendTo=function(t){return e(t).append(this),e(this)},t.prototype.after=function(t){return this.each(function(){var n=this;e(t).each(function(){n.parentNode.insertBefore(this,n.nextSibling)})})},t.prototype.remove=function(){return this.each(function(){this.parentNode.removeChild(this)})},t.prototype.parent=function(){return e(this.isBlank()?null:this.get(0).parentNode)},t.prototype.addClass=function(t){return this.each(function(){this.classList.add(t)})},t.prototype.css=function(t,n){return t=t.replace(/[-_](.)/g,function(t,e){return e.toUpperCase()}),void 0===n?this.isBlank()?void 0:this.get(0).style[t]:this.isBlank()?e(this):this.each(function(){this.style[t]=n})},t.prototype.data=function(t,n){return t=t.replace(/[-_](.)/g,function(t,e){return e.toUpperCase()}),void 0===n?this.isBlank()?void 0:this.get(0).dataset[t]:this.isBlank()?e(this):this.each(function(){this.dataset[t]=n})},t.prototype.val=function(t){return 0===arguments.length?this.isBlank()?void 0:this.get(0).value:this.each(function(){this.value=t})},t.prototype.trigger=function(t){return this.each(function(){var e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!0),this.dispatchEvent(e)})},t.prototype.change=function(){return this.trigger("change")},t.prototype.each=function(t){return this.elements.forEach(function(e){t.call(e)}),e(this)},t.prototype.isBlank=function(){return null==this.elements||0===this.elements.length},t}();var e=ColorPalette.Element}(ColorPalette||(ColorPalette={}));var ColorPalette;!function(t){"use strict";Object.defineProperty(t,"backgroundChangeFlag",{get:function(){return t.settings.backgroundChangeFlag}})}(ColorPalette||(ColorPalette={}));var ColorPalette;!function(t){"use strict";t.ColorPalette=function(){function n(n){var o=this;this.$target=e(n),this.$target.on("change",function(){t.backgroundChangeFlag&&o.$target.css("background-color",o.color).css("color",o.isBright()?"#000000":"#FFFFFF")})}return n.prototype.open=function(){this.isOpen()||setTimeout(this.initPaletteElement.bind(this),20)},n.prototype.close=function(){this.isOpen()&&setTimeout(this.destroyPaletteElement.bind(this),20)},n.prototype.select=function(t){this.$target.val(t),this.$target.change()},n.prototype.initPaletteElement=function(){var n=this,o=null,r=function(){o=e("<div>").addClass("color-palette-balloon").css("left",n.xOffset+"px").css("top",n.yOffset+"px");var t=function(t){for(var e=t.srcElement;null!=e;e=e.parentElement)if(e===o.get(0)||e===n.$target.get(0))return;n.close(),i()};e(document).on("click",t);var r=function(){n.close(),i()};e(document).on("scroll",r);var i=function(){e(document).off("click",t),e(document).off("scroll",r)}},i=function(){e("<span>"+t.messages.standardColor+"</span>").addClass("color-palette-standard-colors-title").appendTo(o);var r=e("<ul>").addClass("color-palette-standard-colors-table").appendTo(o);t.colors.forEach(function(t){var o=e("<ul>").addClass("color-palette-standard-colors-row").appendTo(e("<li>").appendTo(r));t.forEach(function(t){e("<li>").css("background-color",t).data("color",t).on("click",n.select.bind(n,t)).appendTo(o)})})};r(),i(),this.$palette=o,this.$target.after(this.$palette)},n.prototype.destroyPaletteElement=function(){this.$palette.remove(),this.$palette=null},n.prototype.isOpen=function(){return!!this.$palette},n.prototype.isBright=function(){var t=parseInt(this.color.substr(1,2),16),e=parseInt(this.color.substr(3,2),16),n=parseInt(this.color.substr(5,2),16),o=Math.max(t,e,n),r=Math.min(t,e,n),i=(o-r)/o*100,s=o/255*100;return s-i>=50},Object.defineProperty(n.prototype,"color",{get:function(){var t=this.$target.val();return t.match(/^#[0-9a-fA-F]{6}$/)?t:"#FFFFFF"}}),Object.defineProperty(n.prototype,"xOffset",{get:function(){var t=this.$target.get(0);if(null==t)return 0;var e=t.getBoundingClientRect();return e.left+window.pageXOffset}}),Object.defineProperty(n.prototype,"yOffset",{get:function(){var t=this.$target.get(0);if(null==t)return 0;var e=t.getBoundingClientRect();return e.top+window.pageYOffset+Number(t.offsetHeight)+1}}),n}();var e=t.Element}(ColorPalette||(ColorPalette={}));var ColorPalette;!function(t){"use strict";Object.defineProperty(t,"colors",{get:function(){return t.settings.colors}})}(ColorPalette||(ColorPalette={}));var ColorPalette;!function(t){"use strict";t.init=function(e){var n=new t.ColorPalette(e);return n.$target.on("focus",function(){n.open()}),n}}(ColorPalette||(ColorPalette={}));var ColorPalette;!function(t){"use strict";Object.defineProperty(t,"messages",{get:function(){return t.settings.messages[t.settings.lang]||{}}})}(ColorPalette||(ColorPalette={}));var ColorPalette;!function(t){"use strict";t.settings={colors:[["#E60012","#F39800","#FFF100","#8FC31F","#009944","#009E96"],["#00A0E9","#0068B7","#1D2088","#920783","#E4007F","#E5004F"],["#000000","#FFFFFF"]],lang:"default",messages:{"default":{standardColor:"Standard Color"}},backgroundChangeFlag:!0}}(ColorPalette||(ColorPalette={}));