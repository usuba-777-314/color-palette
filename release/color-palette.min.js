/*!
 * color-palette v1.1.1 - Simple color picker. A user can choose to take a color from palette.
 * Copyright 2015 hironobu-igawa
 * license MIT
 */
var ColorPalette;!function(t){"use strict";t.Element=function(){function t(o){if(!(this instanceof t)){var n=new e;return e.apply(n,arguments),n}if(null==o)return void(this.elements=[]);if(o instanceof HTMLElement||o instanceof HTMLDocument)return void(this.elements=[o]);if(o instanceof t)return void(this.elements=Array.prototype.slice.apply(o.elements));if(o[0]instanceof HTMLElement||o[0]instanceof HTMLDocument)return void(this.elements=Array.prototype.slice.apply(o));if("string"==typeof o||o instanceof String){if("<"===o[0]&&">"===o[o.length-1]){var r=document.createElement("div");return r.innerHTML=o,void(this.elements=Array.prototype.slice.apply(r.children))}return void(this.elements=Array.prototype.slice.apply(document.querySelectorAll(o)))}this.elements=[]}return t.prototype.get=function(t){return this.elements[t]},t.prototype.on=function(t,e){return this.each(function(){this.addEventListener(t,e)})},t.prototype.off=function(t,e){return this.each(function(){this.removeEventListener(t,e)})},t.prototype.append=function(t){return this.each(function(){var o=this;e(t).each(function(){o.appendChild(this)})})},t.prototype.appendTo=function(t){return e(t).append(this),e(this)},t.prototype.after=function(t){return this.each(function(){var o=this;e(t).each(function(){o.parentNode.insertBefore(this,o.nextSibling)})})},t.prototype.remove=function(){return this.each(function(){this.parentNode.removeChild(this)})},t.prototype.parent=function(){return e(this.isBlank()?null:this.get(0).parentNode)},t.prototype.addClass=function(t){return this.each(function(){this.classList.add(t)})},t.prototype.hasClass=function(t){return this.elements.some(function(e){return e.classList.contains(t)})},t.prototype.css=function(t,o){return t=t.replace(/[-_](.)/g,function(t,e){return e.toUpperCase()}),void 0===o?this.isBlank()?void 0:this.get(0).style[t]:this.isBlank()?e(this):this.each(function(){this.style[t]=o})},t.prototype.data=function(t,o){return t=t.replace(/[-_](.)/g,function(t,e){return e.toUpperCase()}),void 0===o?this.isBlank()?void 0:this.get(0).dataset[t]:this.isBlank()?e(this):this.each(function(){this.dataset[t]=o})},t.prototype.val=function(t){return 0===arguments.length?this.isBlank()?void 0:this.get(0).value:this.each(function(){this.value=t})},t.prototype.trigger=function(t){return this.each(function(){var e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!0),this.dispatchEvent(e)})},t.prototype.change=function(){return this.trigger("change")},t.prototype.each=function(t){return this.elements.forEach(function(e){t.call(e)}),e(this)},t.prototype.isBlank=function(){return null==this.elements||0===this.elements.length},t}();var e=ColorPalette.Element}(ColorPalette||(ColorPalette={}));var ColorPalette;!function(t){"use strict";t.BackgroundChanger=function(){function e(t){this.$target=t,this.$target.on("change",this.change.bind(this))}return e.init=function(t){return new e(t)},e.prototype.change=function(){this.isActive()&&this.$target.css("background-color",this.color).css("color",this.isBright()?"#000000":"#FFFFFF")},e.prototype.isActive=function(){return t.settings.backgroundChangeFlag||!1},e.prototype.isBright=function(){var t=parseInt(this.color.substr(1,2),16),e=parseInt(this.color.substr(3,2),16),o=parseInt(this.color.substr(5,2),16),n=Math.max(t,e,o),r=Math.min(t,e,o),i=(n-r)/n*100,s=n/255*100;return s-i>=50},Object.defineProperty(e.prototype,"color",{get:function(){var e=this.$target.val();return t.RGB.isValid(e)?e:"#FFFFFF"}}),e}()}(ColorPalette||(ColorPalette={}));var ColorPalette;!function(t){"use strict";t.ColorPalette=function(){function o(o){this.$target=e(o),this.backgroundChanger=t.BackgroundChanger.init(this.$target),this.backgroundChanger.change(),this.closeListeners=[]}return o.prototype.open=function(){var t=this;setTimeout(function(){t.isOpen()||t.initPaletteElement()},20)},o.prototype.close=function(){var t=this;setTimeout(function(){t.isOpen()&&t.destroyPaletteElement()},20)},o.prototype.select=function(t){this.$target.val(t),this.$target.change()},o.prototype.selectOtherColor=function(){var e=this;t.OtherColor.select(function(o){t.RGB.isValid(o)&&e.select(o)}),e.close()},o.prototype.initPaletteElement=function(){var o=this,n=null,r=null,i=function(){n=e("<div>").addClass("color-palette-balloon").css("left",o.xOffset+"px").css("top",o.yOffset+"px"),o.$target.after(n);var t=function(t){for(var e=t.srcElement;null!=e;e=e.parentElement)if(e===n.get(0)||e===o.$target.get(0))return;o.close()};e(document).on("click",t);var r=function(){o.close()};e(document).on("scroll",r),o.closeListeners.push(function(){e(document).off("click",t),e(document).off("scroll",r)})},s=function(){t.OtherColor.isActive()&&e("<span>"+t.messages.standardColor+"</span>").addClass("color-palette-standard-colors-title").appendTo(n),r=e("<ul>").addClass("color-palette-standard-colors-table").appendTo(n),t.colors.forEach(function(t){var n=e("<ul>").addClass("color-palette-standard-colors-row").appendTo(e("<li>").appendTo(r));t.forEach(function(t){e("<li>").css("background-color",t).data("color",t).on("click",o.select.bind(o,t)).appendTo(n)})})},l=function(){if(t.OtherColor.isActive()){e("<span>"+t.messages.history+"</span>").addClass("color-palette-history-title").appendTo(n);var i=e("<ul>").addClass("color-palette-history").css("width",r.get(0).offsetWidth+"px").appendTo(n);t.OtherColor.query().forEach(function(t){e("<li>").css("background-color",t).data("color",t).on("click",o.select.bind(o,t)).appendTo(i)}),e('<button type="button">'+t.messages.selectOtherColor+"</button>").addClass("color-palette-history-select-other-color").on("click",o.selectOtherColor.bind(o)).appendTo(n)}};i(),s(),l(),this.$palette=n},o.prototype.destroyPaletteElement=function(){this.$palette.remove(),this.$palette=null,this.closeListeners.forEach(function(t){t()}),this.closeListeners=[]},o.prototype.isOpen=function(){return!!this.$palette},Object.defineProperty(o.prototype,"xOffset",{get:function(){var t=this.$target.get(0);if(null==t)return 0;var e=t.getBoundingClientRect();return e.left+window.pageXOffset}}),Object.defineProperty(o.prototype,"yOffset",{get:function(){var t=this.$target.get(0);if(null==t)return 0;var e=t.getBoundingClientRect();return e.top+window.pageYOffset+Number(t.offsetHeight)+1}}),o}();var e=t.Element}(ColorPalette||(ColorPalette={}));var ColorPalette;!function(t){"use strict";Object.defineProperty(t,"colors",{get:function(){return t.settings.colors}})}(ColorPalette||(ColorPalette={}));var ColorPalette;!function(t){"use strict";t.init=function(o){var n=e(o);if(n.elements.length>1)return n.elements.map(function(e){return t.init(e)});var r=new t.ColorPalette(o);return r.$target.hasClass("color-palette-initialized")||(r.$target.on("focus",function(){r.open()}),r.$target.addClass("color-palette-initialized")),r};var e=t.Element}(ColorPalette||(ColorPalette={}));var ColorPalette;!function(t){"use strict";Object.defineProperty(t,"messages",{get:function(){return t.settings.messages[t.settings.lang]||{}}})}(ColorPalette||(ColorPalette={}));var ColorPalette;!function(t){"use strict";t.OtherColor=function(){function e(){}return e.query=function(){return e.histories},e.save=function(t){e.histories.some(function(e){return e===t})&&e.remove(t),e.histories=[t].concat(e.histories).slice(0,e.limit)},e.remove=function(t){e.histories=e.histories.filter(function(e){return e!==t})},e.select=function(o){t.settings.selectOtherColor(function(n){t.RGB.isValid(n)&&e.save(n),o(n)})},e.isActive=function(){return t.settings.otherColorFlag||!1},Object.defineProperty(e,"histories",{get:function(){return JSON.parse(localStorage.colorPaletteOtherColorHistories||"[]")},set:function(t){localStorage.colorPaletteOtherColorHistories=JSON.stringify(t)}}),Object.defineProperty(e,"limit",{get:function(){return t.settings.otherColorLimit}}),e}()}(ColorPalette||(ColorPalette={}));var ColorPalette;!function(t){"use strict";t.RGB=function(){function t(){}return t.isValid=function(t){return!(!t||!t.match)&&t.match(/^#[0-9a-fA-F]{6}$/)},t}()}(ColorPalette||(ColorPalette={}));var ColorPalette;!function(t){"use strict";t.settings={colors:[["#E60012","#F39800","#FFF100","#8FC31F","#009944","#009E96"],["#00A0E9","#0068B7","#1D2088","#920783","#E4007F","#E5004F"],["#000000","#FFFFFF"]],lang:"default",messages:{"default":{standardColor:"Standard Color",history:"History",selectOtherColor:"Other color..."}},backgroundChangeFlag:!0,otherColorFlag:!1,otherColorLimit:6,selectOtherColor:function(t){t(prompt('Please enter the RGB. example: "#00FFFF"'))}}}(ColorPalette||(ColorPalette={}));